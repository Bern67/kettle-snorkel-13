```{r, echo = FALSE, warning = FALSE, message = FALSE}
source("header.r")
```

```{r}
cat("# Models - ", .project, "\n")
cat("## Authors - ", .authors, "\n")
cat("## Date - ", .date, "\n")
```

## Introduction

This document presents the JAGS model code for the analysis. The model
assumptions are listed in the Methods document.

JAGS distributions, functions and operators used in the models are defined in the following three tables. For additional information on the JAGS dialect of  the BUGS language see the [JAGS User Manual](http://people.math.aau.dk/~kkb/Undervisning/Bayes13/sorenh/docs/jags_user_manual.pdf) `r citep(.bib["plummer_jags_2012"])`.

### JAGS Distributions

```{r}
mat <- matrix(
  ncol = 2,
  dimnames = list(NULL,c("Distribution","Description")),
  data = c("dunif(a, b)","Uniform distribution")
)

mat  <- rbind(mat,c("dnorm(mu, sd^-2)","Normal distribution"))
mat  <- rbind(mat,c("dpois(lambda)","Poisson distribution"))
mat  <- rbind(mat,c("dbin(p, n)","Binomial distribution"))
mat  <- rbind(mat,c("dbern(p)","Bernoulli distribution"))
#mat  <- rbind(mat,c("dlnorm(mu, sd^-2)","Log-normal distribution"))
#mat  <- rbind(mat,c("dcat(pi)","Categorical distribution"))
#mat  <- rbind(mat,c("ddirch(alpha)","Dirichlet distribution"))
#mat  <- rbind(mat,c("dgamma(shape, rate)","Gamma distribution"))


mat <- mat[order(mat[,1,drop=T]),]

kable(mat)
```

### JAGS Functions

```{r}
mat <- matrix(
  ncol = 2,
  dimnames = list(NULL,c("Function","Description")),
  data = c("log(x)","Log of x")
)
#mat  <- rbind(mat,c("max(x,y)","Maximum of x and y"))
mat  <- rbind(mat,c("min(x,y)","Minimum of x and y"))
mat  <- rbind(mat,c("logit(x)","Log odds of x"))
#mat  <- rbind(mat,c("sum(a)","Sum of elements of a"))
#mat  <- rbind(mat,c("round(x)","Round to integer away from zero"))
#mat  <- rbind(mat,c("T(x,y)","Truncate distribution so that values lie between x and y"))

mat <- mat[order(mat[,1,drop=T]),]

kable(mat)
```

### JAGS Operators

```{r}
mat <- matrix(
  ncol = 2,
  dimnames = list(NULL,c("Operator","Description")),
  data = c("<-","Deterministic relationship")
)
mat  <- rbind(mat,c("~","Stochastic relationship"))
mat  <- rbind(mat,c("x^y","Power where x is raised to the power of y"))
mat  <- rbind(mat,c("1:n","Vector of integers from 1 to n"))
mat  <- rbind(mat,c("a[1:n]","Subset of first n values in a"))
mat  <- rbind(mat,c("for (i in 1:n) {...} ","Repeat ... for 1 to n times incrementing i each time"))

mat <- mat[order(mat[,1,drop=T]),]
kable(mat)
```

## JAGS Models

The following sections provide the variable and parameter definitions and JAGS model code for the analyses. By convention variables are named using *CamelCase* and the number of levels of a discrete variable (factor) **ObservedFactor** is referenced by **nObservedFactor**. 

```{r}
knit_models(.replacement)
```

## References

```{r}
bibliography("html")
```
